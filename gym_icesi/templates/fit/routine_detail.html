{% extends "base.html" %}

{% block title %}Detalle de rutina - {{ routine.nombre }}{% endblock %}

{% block content %}
<section class="card">
  <header class="card-header">
    <h2>{{ routine.nombre }}</h2>
    <p class="muted">
      Creada por:
      {% if routine.es_predisenada %}
        <strong>Bienestar / Entrenador institucional</strong>
      {% else %}
        <strong>{{ routine.user.username }}</strong>
      {% endif %}
      Â· {{ routine.fecha_creacion|date:"d/m/Y" }}
    </p>
  </header>

  <div class="card-body">
    {% if routine.descripcion %}
      <p>{{ routine.descripcion }}</p>
      <hr>
    {% endif %}

    <h3>Ejercicios de la rutina</h3>

    {% if items %}
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Ejercicio</th>
            <th>Tipo</th>
            <th>Series</th>
            <th>Reps</th>
            <th>Tiempo (seg)</th>
            <th>Notas</th>
          </tr>
        </thead>
        <tbody>
          {% for it in items %}
            <tr>
              <td>{{ it.orden }}</td>
              <td>{{ it.exercise.nombre }}</td>
              <td>{{ it.exercise.tipo }}</td>
              <td>{{ it.series|default:"-" }}</td>
              <td>{{ it.reps|default:"-" }}</td>
              <td>{{ it.tiempo_seg|default:"-" }}</td>
              <td>{{ it.notas|default:"-" }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="muted">Esta rutina aÃºn no tiene ejercicios.</p>
    {% endif %}

    <div class="actions" style="margin-top: 1rem;">
      {% if routine.user == user and not routine.es_predisenada %}
        <a href="{% url 'routine_add_item' routine.pk %}" class="btn">
          â• Agregar ejercicio
        </a>
      {% endif %}

      {% if routine.es_predisenada and routine.user != user %}
        <a href="{% url 'routine_adopt' routine.pk %}" class="btn">
          ğŸ“‹ Adoptar esta rutina
        </a>
      {% endif %}

      <a href="{% url 'routine_list' %}" class="btn-ghost">â† Volver a mis rutinas</a>
    </div>
  </div>
</section>
{% endblock %}
