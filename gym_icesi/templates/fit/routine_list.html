{% extends 'base.html' %}
{% block title %}Mis Rutinas - Gym Icesi{% endblock %}

{% block content %}
<div style="margin-bottom:2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;">
  <div>
    <h1>ğŸ“‹ Mis Rutinas</h1>
    <p>Gestiona tus rutinas personalizadas y explora rutinas prediseÃ±adas por entrenadores.</p>
  </div>
  <a href="{% url 'routine_create' %}" class="btn btn-success">â• Nueva Rutina</a>
</div>

<div class="row">
	<!-- Mis Rutinas Personales -->
	<div class="col">
		<div class="card">
			<h2>ğŸ‹ï¸ Mis Rutinas Personales</h2>
			{% if routines %}
				<ul class="routine-list">
					{% for r in routines %}
						<li>
							<div class="routine-item-info">
								<div class="routine-item-title">
									<a href="{% url 'routine_detail' r.pk %}" class="action-link">{{ r.nombre }}</a>
								</div>
								<div class="routine-item-meta">
									Creada: {{ r.fecha_creacion|date:"d M Y" }}
									{% if r.items.count %}
										| {{ r.items.count }} ejercicio{{ r.items.count|pluralize }}
									{% endif %}
								</div>
							</div>
							<div class="routine-item-actions">
								<a href="{% url 'routine_detail' r.pk %}" class="btn btn-sm">Ver detalles â†’</a>
							</div>
						</li>
					{% endfor %}
				</ul>
			{% else %}
				<div class="empty-state">
					<div class="empty-state-icon">ğŸ“</div>
					<p>No tienes rutinas personales aÃºn.</p>
					<p style="font-size:0.9rem;">Crea tu primera rutina o adopta una prediseÃ±ada.</p>
					<a href="{% url 'routine_create' %}" class="btn">Crear Mi Primera Rutina</a>
				</div>
			{% endif %}
		</div>
	</div>

	<!-- Rutinas PrediseÃ±adas -->
	<div class="col">
		<div class="card" style="background:linear-gradient(135deg, #f8fafc 0%, #e6f2ff 100%);">
			<h3>â­ Rutinas PrediseÃ±adas</h3>
			<p style="font-size:0.9rem;color:var(--muted);margin-bottom:1rem;">
				Rutinas creadas por entrenadores certificados. AdÃ³ptalas y personalÃ­zalas.
			</p>
			{% if presets %}
				<ul class="exercise-list">
					{% for r in presets %}
						<li style="background:white;">
							<div class="routine-item-info">
								<div class="routine-item-title">{{ r.nombre }}</div>
								<div class="routine-item-meta">
									{% if r.autor_trainer %}
										Por: {{ r.autor_trainer.first_name }} {{ r.autor_trainer.last_name }}
									{% endif %}
									{% if r.items.count %}
										| {{ r.items.count }} ejercicio{{ r.items.count|pluralize }}
									{% endif %}
								</div>
							</div>
							<div class="routine-item-actions">
								<a href="{% url 'routine_adopt' r.pk %}" class="btn btn-sm btn-success">âœ“ Adoptar</a>
								<a href="{% url 'routine_detail' r.pk %}" class="action-link" style="font-size:0.9rem;">Ver</a>
							</div>
						</li>
					{% endfor %}
				</ul>
			{% else %}
				<div class="empty-state">
					<div class="empty-state-icon">ğŸ”</div>
					<p>No hay rutinas prediseÃ±adas disponibles aÃºn.</p>
				</div>
			{% endif %}
		</div>
	</div>
</div>

<!-- Info Card -->
<div class="card" style="background:#fffbeb;border-color:#fef3c7;margin-top:1.5rem;">
	<h3 style="color:#92400e;">ğŸ’¡ Â¿SabÃ­as que...?</h3>
	<p style="color:#78350f;margin-bottom:0;">
		Puedes adoptar rutinas prediseÃ±adas por entrenadores y luego personalizarlas segÃºn tus necesidades.
		Â¡Cada rutina adoptada se convierte en tu propia copia editable!
	</p>
</div>
{% endblock %}
