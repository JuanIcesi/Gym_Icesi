{% extends "base.html" %}
{% block title %}Enviar RecomendaciÃ³n - Gym Icesi{% endblock %}

{% block content %}
<div style="margin-bottom:1.5rem;">
  <a href="{% url 'trainer_feedback' tuser.pk %}" class="btn btn-secondary">â† Volver al Usuario</a>
</div>

<div class="card" style="max-width:800px;margin:0 auto;">
  <h2 style="margin:0 0 0.5rem 0;">ğŸ’¬ Enviar RecomendaciÃ³n</h2>
  <p style="color:#6b7280;margin:0 0 1.5rem 0;">
    Para: <strong>{{ tuser.username }}</strong>
    {% if tuser.get_full_name %}
      ({{ tuser.get_full_name }})
    {% endif %}
  </p>
  
  {% if routine %}
    <div style="padding:1rem;background:#eff6ff;border-radius:8px;border-left:4px solid #3b82f6;margin-bottom:1.5rem;">
      <div style="font-weight:500;color:#1e40af;margin-bottom:0.25rem;">ğŸ“‹ Rutina Asociada:</div>
      <div style="color:#1e3a8a;">{{ routine.nombre }}</div>
    </div>
  {% endif %}
  
  {% if progress %}
    <div style="padding:1rem;background:#f0fdf4;border-radius:8px;border-left:4px solid #10b981;margin-bottom:1.5rem;">
      <div style="font-weight:500;color:#166534;margin-bottom:0.25rem;">ğŸ“Š Progreso Asociado:</div>
      <div style="color:#15803d;">
        Fecha: {{ progress.fecha|date:"d M Y" }} | 
        Rutina: {{ progress.routine.nombre }} | 
        Esfuerzo: {{ progress.esfuerzo }}/10
      </div>
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    
    <div style="margin-bottom:1.5rem;">
      <label for="{{ form.mensaje.id_for_label }}" style="display:block;margin-bottom:0.5rem;font-weight:500;">
        Mensaje de RecomendaciÃ³n <span style="color:#ef4444;">*</span>
      </label>
      {{ form.mensaje }}
      {% if form.mensaje.errors %}
        <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
          {{ form.mensaje.errors }}
        </div>
      {% endif %}
      <p style="font-size:0.85rem;color:#6b7280;margin:0.25rem 0 0 0;">
        Escribe recomendaciones especÃ­ficas sobre la rutina, el progreso o el entrenamiento del usuario.
        SÃ© claro y motivador.
      </p>
    </div>

    <div style="display:flex;gap:1rem;margin-top:2rem;">
      <button type="submit" class="btn btn-success" style="flex:1;">âœ“ Enviar RecomendaciÃ³n</button>
      <a href="{% url 'trainer_feedback' tuser.pk %}" class="btn btn-secondary" style="flex:1;text-align:center;">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
