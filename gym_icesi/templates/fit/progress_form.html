{% extends 'base.html' %}
{% block title %}Registrar Progreso - Gym Icesi{% endblock %}

{% block content %}
<div style="margin-bottom:1.5rem;">
  <a href="{% url 'home' %}" class="btn btn-secondary">â† Volver al Dashboard</a>
</div>

<div class="card" style="max-width:800px;margin:0 auto;">
  <div style="margin-bottom:1.5rem;">
    <h2 style="margin:0 0 0.5rem 0;">âœ… Registrar Progreso</h2>
    <p style="color:#6b7280;margin:0;">
      Registra tu sesiÃ³n de entrenamiento para hacer seguimiento de tu evoluciÃ³n y mantener la consistencia.
    </p>
  </div>

  <form method="post">
    {% csrf_token %}

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
      <div>
        <label for="id_routine" style="display:block;margin-bottom:0.5rem;font-weight:500;">
          ğŸ“‹ Rutina Realizada <span style="color:#ef4444;">*</span>
        </label>
        {{ form.routine }}
        {% if form.routine.errors %}
          <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
            {{ form.routine.errors }}
          </div>
        {% endif %}
      </div>

      <div>
        <label for="id_fecha" style="display:block;margin-bottom:0.5rem;font-weight:500;">
          ğŸ“… Fecha <span style="color:#ef4444;">*</span>
        </label>
        {{ form.fecha }}
        {% if form.fecha.errors %}
          <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
            {{ form.fecha.errors }}
          </div>
        {% endif %}
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
      <div>
        <label for="id_tiempo_seg" style="display:block;margin-bottom:0.5rem;font-weight:500;">
          â±ï¸ Tiempo Total (segundos)
        </label>
        {{ form.tiempo_seg }}
        <p style="font-size:0.85rem;color:#6b7280;margin:0.25rem 0 0 0;">
          DuraciÃ³n total del entrenamiento en segundos
        </p>
        {% if form.tiempo_seg.errors %}
          <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
            {{ form.tiempo_seg.errors }}
          </div>
        {% endif %}
      </div>

      <div>
        <label for="id_repeticiones" style="display:block;margin-bottom:0.5rem;font-weight:500;">
          ğŸ”„ Repeticiones Totales
        </label>
        {{ form.repeticiones }}
        <p style="font-size:0.85rem;color:#6b7280;margin:0.25rem 0 0 0;">
          Suma total de repeticiones realizadas
        </p>
        {% if form.repeticiones.errors %}
          <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
            {{ form.repeticiones.errors }}
          </div>
        {% endif %}
      </div>
    </div>

    <div style="margin-bottom:1rem;">
      <label for="id_peso_usado" style="display:block;margin-bottom:0.5rem;font-weight:500;">
        âš–ï¸ Peso Utilizado (kg)
      </label>
      {{ form.peso_usado }}
      <p style="font-size:0.85rem;color:#6b7280;margin:0.25rem 0 0 0;">
        Peso total utilizado durante el entrenamiento (opcional)
      </p>
      {% if form.peso_usado.errors %}
        <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
          {{ form.peso_usado.errors }}
        </div>
      {% endif %}
    </div>

    <div style="margin-bottom:1rem;">
      <label for="id_esfuerzo" style="display:block;margin-bottom:0.5rem;font-weight:500;">
        ğŸ’ª Nivel de Esfuerzo (1-10) <span style="color:#ef4444;">*</span>
      </label>
      {{ form.esfuerzo }}
      <div style="display:flex;justify-content:space-between;margin:0.5rem 0;font-size:0.85rem;color:#6b7280;">
        <span>1 - Muy fÃ¡cil</span>
        <span>5 - Moderado</span>
        <span>10 - MÃ¡ximo esfuerzo</span>
      </div>
      {% if form.esfuerzo.errors %}
        <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
          {{ form.esfuerzo.errors }}
        </div>
      {% endif %}
    </div>

    <div style="margin-bottom:1.5rem;">
      <label for="id_notas" style="display:block;margin-bottom:0.5rem;font-weight:500;">
        ğŸ“ Notas Adicionales (Opcional)
      </label>
      {{ form.notas }}
      <p style="font-size:0.85rem;color:#6b7280;margin:0.25rem 0 0 0;">
        CÃ³mo te sentiste, ejercicios que te costaron, logros, sensaciones, etc.
      </p>
      {% if form.notas.errors %}
        <div style="background:#fee2e2;color:#991b1b;padding:0.5rem;border-radius:6px;margin-top:0.25rem;font-size:0.9rem;">
          {{ form.notas.errors }}
        </div>
      {% endif %}
    </div>

    <div style="display:flex;gap:1rem;margin-top:2rem;">
      <button type="submit" class="btn btn-success" style="flex:1;font-size:1rem;padding:0.875rem;">
        âœ“ Registrar Progreso
      </button>
      <a href="{% url 'home' %}" class="btn btn-secondary" style="flex:1;text-align:center;padding:0.875rem;">
        Cancelar
      </a>
    </div>
  </form>
</div>

<!-- MotivaciÃ³n Card -->
<div class="card" style="max-width:800px;margin:2rem auto 0;background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;">
  <h3 style="color:white;margin:0 0 0.5rem 0;">ğŸ’ª Â¡Sigue asÃ­!</h3>
  <p style="color:rgba(255,255,255,0.95);margin:0;">
    Cada sesiÃ³n registrada te acerca mÃ¡s a tus objetivos. La consistencia es la clave del Ã©xito.
  </p>
</div>

<script>
// Establecer fecha por defecto a hoy si no estÃ¡ preseleccionada
document.addEventListener('DOMContentLoaded', function() {
  const fechaInput = document.getElementById('id_fecha');
  if (fechaInput && !fechaInput.value) {
    const today = new Date().toISOString().split('T')[0];
    fechaInput.value = today;
  }
});
</script>
{% endblock %}
